
ACLOCAL_AMFLAGS = -I @TE_M4@

AM_CPPFLAGS = @TE_CPPFLAGS@ -I$(DESTDIR)/$(includedir) $(TE_CPPFLAGS_VAR)
AM_CFLAGS = @TE_CFLAGS@ $(TE_CFLAGS_VAR)

if HAS_SNMP 
AM_CPPFLAGS += -DHAS_SNMP -DCMU_COMPATIBLE -DUCD_COMPATIBLE
SNMP_S = ndn_snmp.c
SNMP_H = ndn_snmp.h
else
SNMP_S =
SNMP_H =
endif


lib_LTLIBRARIES=libndn.la

include_HEADERS = \
	ndn.h \
	ndn_internal.h \
	ndn_base.h \
	ndn_pcap.h \
	ndn_ppp.h \
	ndn_atm.h \
	ndn_eth.h \
	ndn_rte_mbuf.h \
	ndn_vxlan.h \
	ndn_geneve.h \
	ndn_gre.h \
	ndn_llc.h \
	ndn_bridge.h \
	ndn_arp.h \
	ndn_ipstack.h \
	ndn_forw.h \
	ndn_dhcp.h \
	ndn_igmp.h \
	ndn_cli.h \
	$(SNMP_H) \
	ndn_iscsi.h \
	ndn_socket.h \
	ndn_kprobes.h \
	ndn_flow.h \
	ndn_rte_flow.h

libndn_la_SOURCES = \
	ndn_generic.c \
	ndn_context.c \
	ndn_base.c \
	ndn_pcap.c \
	ndn_ppp.c \
	ndn_atm.c \
	ndn_eth.c \
	ndn_rte_mbuf.c \
	ndn_vxlan.c \
	ndn_geneve.c \
	ndn_gre.c \
	ndn_llc.c \
	ndn_bridge.c \
	ndn_arp.c \
	ndn_ipstack.c \
	ndn_forw.c \
	ndn_dhcp.c \
	ndn_igmp.c \
	ndn_cli.c \
	$(SNMP_S) \
	ndn_iscsi.c \
	ndn_socket.c \
	ndn_kprobes.c \
	ndn_csap.c \
	ndn_flow.c \
	ndn_rte_flow.c


install-exec-hook:
	touch -c -r libndn.la $(DESTDIR)/$(libdir)/libndn.*

install-data-hook:
	for i in $(include_HEADERS) ; do \
		touch -c -r $(srcdir)/$$i $(DESTDIR)/$(includedir)/$$i ; \
	done

all: install
