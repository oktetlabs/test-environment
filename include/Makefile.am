# Process this file with configure to produce a Makefile

# Test Environment
#
# include/ Makefile
#
# Copyright (C) 2003-2018 OKTET Labs.
#
# Test Environment is free software; you can redistribute it and/or
# modify it under the terms of the GNU General Public License as
# published by the Free Software Foundation; either version 2 of
# the License, or (at your option) any later version.
#
# Test Environment is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place, Suite 330, Boston,
# MA  02111-1307  USA
#
#
# Author Elena A. Vengerova <Elena.Vengerova@oktetlabs.ru>

ACLOCAL_AMFLAGS = -I @TE_M4@

AM_CPPFLAGS = @TE_CPPFLAGS@ $(TE_CPPFLAGS_VAR)
AM_CFLAGS = @TE_CFLAGS@ $(TE_CFLAGS_VAR)

te_headers = \
	te_defs.h \
	te_errno.h \
	te_proto.h \
	te_stdint.h \
	te_printf.h \
	comm_agent.h \
	rcf_methods.h \
	rcf_common.h \
	tad_common.h \
	rcf_rpc_defs.h \
	cs_common.h \
	te_raw_log.h \
	logger_api.h \
	logger_defs.h \
	logger_int.h \
	rcf_internal.h \
	te_config.h \
	ta_common.h \
	te_win_defs.h \
	te_ethernet.h \
	te_ethernet_phy.h \
	te_queue.h \
	te_test_result.h \
	tester_msg.h \
	te_ethtool.h \
	te_cwmp.h \
	cwmp_soapStub.h \
	te_power_sw.h \
	te_param.h \
	te_sniffers.h \
        te_upnp.h

include_HEADERS = te_config_internal.h $(te_headers)

rpcgendir = $(datadir)/rpcgen
dist_rpcgen_DATA = rpcconv.m4 rpcgen.m4

if WINDOWS

include_HEADERS+=te_win_sizeof.h
include_HEADERS+=te_win.h

else

EXTRA_DIST=te_win_sizeof.h.in te_win.h

endif

all: install

install-data-local:
	cat @TE_EXT_LIBS_FILE@ | sed "s/[\]$$//" | xargs -n1 -P0 \
	    bash -c "if [ -n \$$0 ] ; then \
	    mkdir -p $(DESTDIR)/$(prefix)/../\$${0%/*} ; \
	    if [ -f ../platforms/\$$0 ] ; then \
	    cp -u ../platforms/\$$0 \
	    $(DESTDIR)/$(prefix)/../\$$0 ; fi fi"

install-data-hook:
	for i in $(te_headers) ; do \
	    touch -c -r $(srcdir)/$$i $(DESTDIR)/$(includedir)/$$i ; \
	done
	touch -c -r $(srcdir)/configure.ac \
                    $(DESTDIR)/$(includedir)/te_config_internal.h
