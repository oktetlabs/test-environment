<?xml version="1.0"?>
<backup>

    <!--
        This configuration model describes virtual machines configuration and
        control.

        Copyright (C) 2019 OKTET Labs.

        Author: Andrew Rybchenko E-mail: Andrew.Rybchenko@oktetlabs.ru
    -->

    <!-- Virtual machine instance.
         Name: VM name -->
    <object oid="/agent/vm" access="read_create" type="none"/>

    <!-- Status of the virtual machine. Is it running or not?
         Name: None -->
    <object oid="/agent/vm/status" access="read_write" type="integer"/>

    <!-- SSH port information.
         Name: None -->
    <object oid="/agent/vm/ssh_port" access="read_only" type="none"/>

    <!-- SSH port of the local host forwarded to the virtual machine.
         The TCP port should be used by the rcfunix to start test agent.
         Name: None -->
    <object oid="/agent/vm/ssh_port/host" access="read_only" type="integer"/>

    <!-- SSH port in the virtual machine SSH daemon is listening to.
         Host SSH port is forwarded to the port.
         Default is 22 (as per services database).
         Name: None -->
    <object oid="/agent/vm/ssh_port/guest" access="read_write" type="integer"/>

    <!-- RCF port of the local host forwarded to the virtual machine.
         The TCP port should be passed to the Test Agent and used by the RCF
         to connect to the Test Agent.
         Default: automatically generated.
         Name: None -->
    <object oid="/agent/vm/rcf_port" access="read_write" type="integer"/>

    <!-- Enable/disable KVM mode.
         Name: None -->
    <object oid="/agent/vm/kvm" access="read_write" type="integer"/>

    <!-- CPU configuration subtree.
         Name: None -->
    <object oid="/agent/vm/cpu" access="read_only" type="none"/>

    <!-- CPU model. Default is host.
         Name: None -->
    <object oid="/agent/vm/cpu/model" access="read_write" type="string"/>

    <!-- Number of CPUs. Default is 1.
         Name: None -->
    <object oid="/agent/vm/cpu/num" access="read_write" type="integer"/>

    <!-- Virtual machine RAM settings.
         Name: None -->
    <object oid="/agent/vm/mem" access="read_only" type="none"/>

    <!-- RAM size in megabytes. Default is 256M.
         Name: None -->
    <object oid="/agent/vm/mem/size" access="read_write" type="integer"/>

    <!-- Virtual machine drives configuration.
         Name: drive ID -->
    <object oid="/agent/vm/drive" access="read_create" type="none"/>

    <!-- Disk image to use.
         Name: None -->
    <object oid="/agent/vm/drive/file" access="read_write" type="string"/>

    <!-- Enable/disable snapshot mode.
         Default is true which means that no changes are stored.
         Name: None -->
    <object oid="/agent/vm/drive/snapshot" access="read_write" type="boolean"/>

    <!-- Enable/disable read-only mode.
         Default is false.
         Name: None -->
    <object oid="/agent/vm/drive/readonly" access="read_write" type="boolean"/>

    <!-- Virtual machine network interfaces configuration.
         Name: network name -->
    <object oid="/agent/vm/net" access="read_create" type="none"/>

    <!-- Type of the network interface.
         E.g. nic, tap, vhost-user
         Name: None -->
    <object oid="/agent/vm/net/type" access="read_write" type="string"/>

    <!-- Type specific configuration.
          - nic: model
          - tap: file descriptor (if a number) or TAP interface name
          - vhost-user: unix domain socket
         Name: None -->
    <object oid="/agent/vm/net/type_spec" access="read_write" type="string"/>

    <!-- Bus address of the device inside the virtual machine. E.g. pci.00:02.0
         Default is automatically generated.
         Name: None -->
    <object oid="/agent/vm/net/bus_addr" access="read_write" type="string"/>

    <!-- MAC address assigned to the interface.
         Default is random (52:54:00:<TA>:<TA>:<xx>).
         Name: None -->
    <object oid="/agent/vm/net/mac_addr" access="read_write" type="string"/>

    <!-- Pass-through PCI function into the virtual machine.
         The PCI function resource must be grabbed.
         Name: human-readable name
         Value: canonical instance OID of the host PCI function to pass-through, e.g.
         /agent:Agt/hardware:/pci:/device:0000:01:00.0 -->
    <object oid="/agent/vm/pci_pt" access="read_create" type="string"/>
</backup>
